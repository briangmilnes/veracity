---
description: NEVER modify, write, run tools on, or commit to any repository outside of /home/milnes/projects/veracity
globs:
alwaysApply: true
---

# External Repository Protection

**ABSOLUTE RULE: You may NEVER modify any file outside of `/home/milnes/projects/veracity`.**

This includes but is not limited to:

- `/home/milnes/projects/APAS-VERUS/` — the live codebase. NEVER run reorder, write, or any file-modifying command against it.
- Any other repository under `/home/milnes/projects/` that is not `veracity`.

## What you CAN do

- Read files in external repos for reference (grep, cat, read).
- Run the veracity analysis tools in **read-only mode** (no `-r`/`--reorder`) against external repos.
- Run dry-run (`-n`/`--dry-run`) against external repos.

## The fixture

- The ONLY copy of APAS-VERUS you may modify is the fixture at `tests/fixtures/APAS-VERUS/`.
- The fixture is listed in `.gitignore` — it is NOT tracked by the veracity repo. `git checkout -- .` does nothing to it.
- To refresh the fixture to a clean state, you MUST delete and re-clone:
  ```bash
  cd /home/milnes/projects/veracity/tests/fixtures
  rm -rf APAS-VERUS
  git clone https://github.com/briangmilnes/APAS-VERUS.git APAS-VERUS
  ```
- NEVER use `git checkout`, `git restore`, or `cp` from the local working copy to "refresh" the fixture. These do not produce a clean state.
- NEVER commit changes to the fixture's git repository.

## Why

Running file-modifying tools (`-r`, `--reorder`) on the live APAS-VERUS repo pollutes it with generated content (ToC headers, section markers, reordered code) that then gets accidentally committed upstream. This happened and caused real damage.
