{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/veracity/schemas/vstd_inventory.schema.json",
  "title": "Verus vstd Library Inventory",
  "description": "Complete inventory of Verus vstd library generated by veracity-analyze-libs",
  "type": "object",
  "required": ["generated", "verus_version", "vstd_path", "modules", "summary"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "generated": {
      "type": "string",
      "description": "Timestamp when inventory was generated"
    },
    "verus_version": {
      "type": "string",
      "description": "Verus version (git commit or tag)"
    },
    "vstd_path": {
      "type": "string",
      "description": "Path to vstd source"
    },
    "modules": {
      "type": "array",
      "description": "All vstd modules",
      "items": { "$ref": "#/$defs/ModuleInfo" }
    },
    "wrapped_rust_types": {
      "type": "array",
      "description": "Rust types wrapped with vstd specifications",
      "items": { "$ref": "#/$defs/WrappedRustType" }
    },
    "ghost_types": {
      "type": "array",
      "description": "Ghost types (spec-mode only, erased at runtime)",
      "items": { "$ref": "#/$defs/GhostType" }
    },
    "tracked_types": {
      "type": "array",
      "description": "Tracked/linear types for resource management",
      "items": { "$ref": "#/$defs/TrackedType" }
    },
    "spec_functions": {
      "type": "array",
      "description": "Pure spec-mode functions",
      "items": { "$ref": "#/$defs/SpecFunction" }
    },
    "proof_functions": {
      "type": "array",
      "description": "Proof-mode functions and lemmas",
      "items": { "$ref": "#/$defs/ProofFunction" }
    },
    "exec_functions": {
      "type": "array",
      "description": "Exec-mode functions with specifications",
      "items": { "$ref": "#/$defs/ExecFunction" }
    },
    "external_specs": {
      "type": "array",
      "description": "Specifications for external (non-Verus) code",
      "items": { "$ref": "#/$defs/ExternalSpec" }
    },
    "traits": {
      "type": "array",
      "description": "Traits with specifications",
      "items": { "$ref": "#/$defs/TraitInfo" }
    },
    "axioms": {
      "type": "array",
      "description": "Axioms (unproven assumptions)",
      "items": { "$ref": "#/$defs/Axiom" }
    },
    "broadcast_groups": {
      "type": "array",
      "description": "Broadcast groups for selectively enabling axioms",
      "items": { "$ref": "#/$defs/BroadcastGroup" }
    },
    "macros": {
      "type": "array",
      "description": "Verus-specific macros",
      "items": { "$ref": "#/$defs/MacroInfo" }
    },
    "constants": {
      "type": "array",
      "description": "Specification constants",
      "items": { "$ref": "#/$defs/ConstantInfo" }
    },
    "summary": {
      "$ref": "#/$defs/Summary"
    }
  },
  "$defs": {
    "ModuleInfo": {
      "type": "object",
      "description": "A vstd module",
      "required": ["name", "path", "source_file"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Module name"
        },
        "path": {
          "type": "string",
          "description": "Full module path (e.g., vstd::seq)"
        },
        "source_file": {
          "type": "string",
          "description": "Source file path"
        },
        "is_public": {
          "type": "boolean"
        },
        "child_modules": {
          "type": "array",
          "items": { "type": "string" }
        },
        "doc_comment": {
          "type": ["string", "null"],
          "description": "Module-level documentation"
        }
      }
    },
    "WrappedRustType": {
      "type": "object",
      "description": "A Rust type that vstd provides specifications for",
      "required": ["rust_type", "rust_module", "vstd_path", "methods_wrapped", "source_file"],
      "properties": {
        "rust_type": {
          "type": "string",
          "description": "Original Rust type name",
          "examples": ["Vec", "Option", "Result"]
        },
        "rust_module": {
          "type": "string",
          "description": "Rust module where type is defined",
          "examples": ["alloc::vec", "core::option"]
        },
        "vstd_path": {
          "type": "string",
          "description": "vstd path where specs are defined",
          "examples": ["vstd::std_specs::vec"]
        },
        "trait_name": {
          "type": ["string", "null"],
          "description": "Extension trait name if any",
          "examples": ["VecAdditionalSpecFns"]
        },
        "methods_wrapped": {
          "type": "array",
          "items": { "$ref": "#/$defs/WrappedMethod" },
          "description": "Rust methods that have vstd specs"
        },
        "source_file": {
          "type": "string"
        },
        "source_line": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "WrappedMethod": {
      "type": "object",
      "description": "A Rust method wrapped with vstd specifications",
      "required": ["name", "has_requires", "has_ensures"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Method name"
        },
        "mode": {
          "type": "string",
          "enum": ["spec", "proof", "exec"],
          "description": "Verus mode"
        },
        "has_requires": {
          "type": "boolean",
          "description": "Has requires clause"
        },
        "has_ensures": {
          "type": "boolean",
          "description": "Has ensures clause"
        },
        "has_recommends": {
          "type": "boolean",
          "description": "Has recommends clause"
        },
        "is_uninterpreted": {
          "type": "boolean",
          "description": "Uninterpreted (axiomatized) function"
        }
      }
    },
    "GhostType": {
      "type": "object",
      "description": "A ghost type (spec-only, erased at runtime)",
      "required": ["name", "qualified_path", "source_file"],
      "properties": {
        "name": {
          "type": "string",
          "examples": ["Seq", "Set", "Map", "Multiset"]
        },
        "qualified_path": {
          "type": "string",
          "examples": ["vstd::seq::Seq"]
        },
        "type_params": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Generic type parameters"
        },
        "rust_equivalent": {
          "type": ["string", "null"],
          "description": "Closest Rust type if any",
          "examples": ["Vec", "HashSet", "HashMap"]
        },
        "methods": {
          "type": "array",
          "items": { "$ref": "#/$defs/SpecMethod" }
        },
        "axiom_count": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of axioms for this type"
        },
        "doc_comment": {
          "type": ["string", "null"]
        },
        "source_file": {
          "type": "string"
        },
        "source_line": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "SpecMethod": {
      "type": "object",
      "description": "A spec-mode method on a ghost type",
      "required": ["name"],
      "properties": {
        "name": {
          "type": "string"
        },
        "is_uninterpreted": {
          "type": "boolean",
          "description": "uninterp fn - axiomatized"
        },
        "is_open": {
          "type": "boolean",
          "description": "open spec fn - body visible to SMT"
        },
        "has_recommends": {
          "type": "boolean"
        },
        "signature": {
          "type": ["string", "null"],
          "description": "Type signature"
        }
      }
    },
    "TrackedType": {
      "type": "object",
      "description": "A tracked/linear type for resource management",
      "required": ["name", "qualified_path", "source_file"],
      "properties": {
        "name": {
          "type": "string",
          "examples": ["Tracked", "Ghost", "PointsTo"]
        },
        "qualified_path": {
          "type": "string"
        },
        "inner_type": {
          "type": ["string", "null"],
          "description": "Type parameter it wraps"
        },
        "usage_modes": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["spec", "proof", "exec"]
          },
          "description": "Modes where this type can be used"
        },
        "source_file": {
          "type": "string"
        },
        "source_line": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "SpecFunction": {
      "type": "object",
      "description": "A pure spec-mode function",
      "required": ["name", "qualified_path", "source_file"],
      "properties": {
        "name": {
          "type": "string"
        },
        "qualified_path": {
          "type": "string"
        },
        "is_open": {
          "type": "boolean",
          "description": "Body visible to SMT solver"
        },
        "is_uninterpreted": {
          "type": "boolean",
          "description": "Axiomatized, no body"
        },
        "has_recommends": {
          "type": "boolean"
        },
        "decreases": {
          "type": ["string", "null"],
          "description": "Termination measure if recursive"
        },
        "signature": {
          "type": ["string", "null"]
        },
        "source_file": {
          "type": "string"
        },
        "source_line": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "ProofFunction": {
      "type": "object",
      "description": "A proof-mode function or lemma",
      "required": ["name", "qualified_path", "source_file"],
      "properties": {
        "name": {
          "type": "string"
        },
        "qualified_path": {
          "type": "string"
        },
        "is_lemma": {
          "type": "boolean",
          "description": "Is a lemma (proof obligation)"
        },
        "is_broadcast": {
          "type": "boolean",
          "description": "Broadcast proof (auto-used)"
        },
        "has_requires": {
          "type": "boolean"
        },
        "has_ensures": {
          "type": "boolean"
        },
        "broadcast_group": {
          "type": ["string", "null"],
          "description": "Broadcast group if any"
        },
        "signature": {
          "type": ["string", "null"]
        },
        "source_file": {
          "type": "string"
        },
        "source_line": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "ExecFunction": {
      "type": "object",
      "description": "An exec-mode function with specifications",
      "required": ["name", "qualified_path", "source_file"],
      "properties": {
        "name": {
          "type": "string"
        },
        "qualified_path": {
          "type": "string"
        },
        "has_requires": {
          "type": "boolean"
        },
        "has_ensures": {
          "type": "boolean"
        },
        "has_recommends": {
          "type": "boolean"
        },
        "can_panic": {
          "type": "boolean"
        },
        "wraps_rust_fn": {
          "type": ["string", "null"],
          "description": "Rust function this wraps (if any)"
        },
        "signature": {
          "type": ["string", "null"]
        },
        "source_file": {
          "type": "string"
        },
        "source_line": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "ExternalSpec": {
      "type": "object",
      "description": "Specification for external (non-Verus) code",
      "required": ["external_fn", "source_file"],
      "properties": {
        "external_fn": {
          "type": "string",
          "description": "The external function being specified"
        },
        "external_module": {
          "type": ["string", "null"],
          "description": "Module of the external function"
        },
        "has_requires": {
          "type": "boolean"
        },
        "has_ensures": {
          "type": "boolean"
        },
        "is_trusted": {
          "type": "boolean",
          "description": "Marked #[verifier::external] or trusted"
        },
        "source_file": {
          "type": "string"
        },
        "source_line": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "TraitInfo": {
      "type": "object",
      "description": "A trait with specifications",
      "required": ["name", "qualified_path", "source_file"],
      "properties": {
        "name": {
          "type": "string"
        },
        "qualified_path": {
          "type": "string"
        },
        "extends_rust_trait": {
          "type": ["string", "null"],
          "description": "Rust trait it extends"
        },
        "spec_methods": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Spec-mode methods"
        },
        "proof_methods": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Proof obligations"
        },
        "exec_methods": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Exec methods with specs"
        },
        "source_file": {
          "type": "string"
        },
        "source_line": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "Axiom": {
      "type": "object",
      "description": "An axiom (unproven assumption)",
      "required": ["name", "qualified_path", "category", "source_file"],
      "properties": {
        "name": {
          "type": "string"
        },
        "qualified_path": {
          "type": "string"
        },
        "category": {
          "type": "string",
          "enum": ["arithmetic", "collection", "memory", "rust_semantics", "external", "structural", "other"],
          "description": "Axiom category"
        },
        "statement": {
          "type": ["string", "null"],
          "description": "The axiom statement"
        },
        "broadcast_group": {
          "type": ["string", "null"],
          "description": "Broadcast group this axiom belongs to"
        },
        "is_auto_broadcast": {
          "type": "boolean",
          "description": "Auto-broadcast (always active)"
        },
        "depends_on": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Other axioms this depends on"
        },
        "rust_assumption": {
          "type": ["string", "null"],
          "description": "What Rust behavior this assumes"
        },
        "source_file": {
          "type": "string"
        },
        "source_line": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "BroadcastGroup": {
      "type": "object",
      "description": "A broadcast group for selectively enabling axioms",
      "required": ["name", "qualified_path", "members", "source_file"],
      "properties": {
        "name": {
          "type": "string"
        },
        "qualified_path": {
          "type": "string"
        },
        "members": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Axioms/lemmas in this group"
        },
        "is_default_enabled": {
          "type": "boolean",
          "description": "Enabled by default in vstd"
        },
        "source_file": {
          "type": "string"
        },
        "source_line": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "MacroInfo": {
      "type": "object",
      "description": "A Verus-specific macro",
      "required": ["name", "qualified_path", "source_file"],
      "properties": {
        "name": {
          "type": "string",
          "examples": ["seq!", "set!", "map!", "assert_by", "reveal"]
        },
        "qualified_path": {
          "type": "string"
        },
        "purpose": {
          "type": ["string", "null"],
          "description": "What the macro does"
        },
        "usage_modes": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["spec", "proof", "exec"]
          },
          "description": "Where macro can be used"
        },
        "source_file": {
          "type": "string"
        },
        "source_line": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "ConstantInfo": {
      "type": "object",
      "description": "A specification constant",
      "required": ["name", "qualified_path", "source_file"],
      "properties": {
        "name": {
          "type": "string"
        },
        "qualified_path": {
          "type": "string"
        },
        "const_type": {
          "type": ["string", "null"]
        },
        "value": {
          "type": ["string", "null"]
        },
        "mode": {
          "type": "string",
          "enum": ["spec", "exec"]
        },
        "source_file": {
          "type": "string"
        },
        "source_line": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "Summary": {
      "type": "object",
      "description": "Aggregate counts and coverage stats",
      "required": [
        "total_modules",
        "total_wrapped_rust_types",
        "total_wrapped_methods",
        "total_ghost_types",
        "total_tracked_types",
        "total_spec_functions",
        "total_proof_functions",
        "total_exec_functions",
        "total_external_specs",
        "total_traits",
        "total_axioms",
        "total_broadcast_groups"
      ],
      "properties": {
        "total_modules": {
          "type": "integer",
          "minimum": 0
        },
        "total_wrapped_rust_types": {
          "type": "integer",
          "minimum": 0,
          "description": "Rust types with vstd specifications"
        },
        "total_wrapped_methods": {
          "type": "integer",
          "minimum": 0,
          "description": "Total Rust methods wrapped"
        },
        "total_ghost_types": {
          "type": "integer",
          "minimum": 0
        },
        "total_tracked_types": {
          "type": "integer",
          "minimum": 0
        },
        "total_spec_functions": {
          "type": "integer",
          "minimum": 0
        },
        "total_proof_functions": {
          "type": "integer",
          "minimum": 0
        },
        "total_exec_functions": {
          "type": "integer",
          "minimum": 0
        },
        "total_external_specs": {
          "type": "integer",
          "minimum": 0
        },
        "total_traits": {
          "type": "integer",
          "minimum": 0
        },
        "total_axioms": {
          "type": "integer",
          "minimum": 0
        },
        "total_auto_broadcast_axioms": {
          "type": "integer",
          "minimum": 0,
          "description": "Axioms that are always active"
        },
        "total_broadcast_groups": {
          "type": "integer",
          "minimum": 0
        },
        "total_macros": {
          "type": "integer",
          "minimum": 0
        },
        "total_constants": {
          "type": "integer",
          "minimum": 0
        }
      }
    }
  }
}

